service: ads-dse-ccentral
panels:
  - kind: custom
    from: ./monitoring/instances.json
alerts:
  - kind: custom
    name: ads_dse_ccentral_instances
    expr: (count(kube_pod_container_status_running{container="ccentral", environment="prd"})) < 1
    severity: slack
    receiver: DSE
    for: 5m
    annotations:
      summary: No CCentral instances running
      description: 'CCentral instance count below threshold: {{ $value }})'
  - kind: custom
    name: ads_dse_etcd_instances
    expr: (sum(etcd_server_has_leader{cluster_name="etcd-dse-prd"})) < 3
    severity: slack
    receiver: DSE
    for: 5m
    annotations:
      summary: Insufficient etcd instances running
      description: 'etcd instance count below threshold: {{ $value }})'
